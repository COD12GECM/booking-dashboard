<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings - <%= owner.clinicName || 'Dashboard' %></title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --neo-bg: #e0e5ec;
      --neo-shadow-dark: #a3b1c6;
      --neo-shadow-light: #ffffff;
      --neo-primary: #10b981;
      --neo-text: #1e293b;
      --neo-text-muted: #64748b;
    }
    
    body {
      min-height: 100vh;
      background: var(--neo-bg);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }
    
    .navbar {
      background: var(--neo-bg);
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 12px var(--neo-shadow-dark);
    }
    
    .navbar-brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .navbar-logo {
      width: 44px;
      height: 44px;
      background: linear-gradient(135deg, #10b981, #059669);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .navbar-logo svg {
      width: 24px;
      height: 24px;
      stroke: white;
    }
    
    .navbar-title {
      color: var(--neo-text);
      font-size: 20px;
      font-weight: 700;
    }
    
    .navbar-actions {
      display: flex;
      gap: 16px;
    }
    
    .nav-link {
      color: var(--neo-text-muted);
      text-decoration: none;
      padding: 10px 20px;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
      background: var(--neo-bg);
      box-shadow: 4px 4px 8px var(--neo-shadow-dark), -4px -4px 8px var(--neo-shadow-light);
    }
    
    .nav-link:hover {
      color: var(--neo-text);
    }
    
    .nav-link.active {
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
    }
    
    .container {
      max-width: 700px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    
    .page-header {
      margin-bottom: 32px;
    }
    
    .page-title {
      color: var(--neo-text);
      font-size: 28px;
      font-weight: 700;
    }
    
    .card {
      background: var(--neo-bg);
      border-radius: 24px;
      padding: 36px;
      margin-bottom: 24px;
      box-shadow: 12px 12px 24px var(--neo-shadow-dark), -12px -12px 24px var(--neo-shadow-light);
    }
    
    .card-title {
      color: var(--neo-text);
      font-size: 16px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 2px solid rgba(163, 177, 198, 0.3);
    }
    
    .form-group {
      margin-bottom: 24px;
    }
    
    .form-label {
      display: block;
      color: var(--neo-text);
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .form-input, .form-textarea {
      width: 100%;
      padding: 16px 20px;
      background: var(--neo-bg);
      border: none;
      border-radius: 14px;
      font-size: 16px;
      color: var(--neo-text);
      box-shadow: inset 4px 4px 8px var(--neo-shadow-dark), inset -4px -4px 8px var(--neo-shadow-light);
      transition: all 0.3s ease;
    }
    
    .form-input:focus, .form-textarea:focus {
      outline: none;
    }
    
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    .form-row-3 {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 20px;
    }
    
    .form-hint {
      color: var(--neo-text-muted);
      font-size: 13px;
      margin-top: 8px;
    }
    
    .btn {
      width: 100%;
      padding: 18px;
      border: none;
      border-radius: 16px;
      font-size: 17px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: #ffffff;
      box-shadow: 6px 6px 12px var(--neo-shadow-dark), -6px -6px 12px var(--neo-shadow-light);
    }
    
    .btn:hover {
      transform: translateY(-2px);
    }
    
    .success-msg {
      background: linear-gradient(135deg, #d1fae5, #a7f3d0);
      color: #065f46;
      padding: 16px 24px;
      border-radius: 16px;
      margin-bottom: 24px;
      font-size: 15px;
      font-weight: 500;
    }
    
    @media (max-width: 600px) {
      .form-row, .form-row-3 { grid-template-columns: 1fr; }
      .card { padding: 24px; }
      .navbar { padding: 16px; flex-direction: column; gap: 12px; }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-logo">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
          <line x1="16" y1="2" x2="16" y2="6"/>
          <line x1="8" y1="2" x2="8" y2="6"/>
          <line x1="3" y1="10" x2="21" y2="10"/>
        </svg>
      </div>
      <span class="navbar-title"><%= owner.clinicName || 'Dashboard' %></span>
    </div>
    <div class="navbar-actions">
      <a href="/dashboard" class="nav-link">Bookings</a>
      <a href="/dashboard/settings" class="nav-link active">Settings</a>
      <a href="/logout" class="nav-link">Logout</a>
    </div>
  </nav>
  
  <div class="container">
    <div class="page-header">
      <h1 class="page-title">Settings</h1>
    </div>
    
    <% if (success) { %>
      <div class="success-msg"><%= success %></div>
    <% } %>
    
    <form method="POST" action="/dashboard/settings">
      <div class="card">
        <h2 class="card-title">Clinic Information</h2>
        
        <div class="form-group">
          <label class="form-label">Clinic Name</label>
          <input type="text" name="clinicName" class="form-input" value="<%= owner.clinicName || '' %>" placeholder="Your clinic name">
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Phone</label>
            <input type="tel" name="clinicPhone" class="form-input" value="<%= owner.clinicPhone || '' %>" placeholder="+1 234 567 890">
          </div>
          <div class="form-group">
            <label class="form-label">Website URL</label>
            <input type="url" name="websiteUrl" class="form-input" value="<%= owner.websiteUrl || '' %>" placeholder="https://...">
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Address</label>
          <input type="text" name="clinicAddress" class="form-input" value="<%= owner.clinicAddress || '' %>" placeholder="Your clinic address">
        </div>
      </div>
      
      <div class="card">
        <h2 class="card-title">Booking Settings</h2>
        
        <div class="form-row-3">
          <div class="form-group">
            <label class="form-label">Opening Hour</label>
            <input type="number" name="startHour" class="form-input" value="<%= owner.settings.startHour %>" min="0" max="23">
          </div>
          <div class="form-group">
            <label class="form-label">Closing Hour</label>
            <input type="number" name="endHour" class="form-input" value="<%= owner.settings.endHour %>" min="0" max="23">
          </div>
          <div class="form-group">
            <label class="form-label">Slots Per Hour</label>
            <input type="number" name="slotsPerHour" class="form-input" value="<%= owner.settings.slotsPerHour %>" min="1" max="10">
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Services</label>
          <input type="text" name="services" class="form-input" value="<%= owner.settings.services.join(', ') %>" placeholder="Consultation, Follow-up, Premium">
          <p class="form-hint">Separate services with commas</p>
        </div>
      </div>
      
      <div class="card">
        <h2 class="card-title">Email Customization</h2>
        
        <div class="form-group">
          <label class="form-label">Business Name (for emails)</label>
          <input type="text" name="emailBusinessName" class="form-input" value="<%= owner.emailSettings?.businessName || owner.clinicName || '' %>" placeholder="Your Business Name">
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Primary Color</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="color" name="primaryColor" value="<%= owner.emailSettings?.primaryColor || '#10b981' %>" style="width: 60px; height: 44px; border: none; border-radius: 8px; cursor: pointer;">
              <input type="text" class="form-input" value="<%= owner.emailSettings?.primaryColor || '#10b981' %>" readonly style="flex: 1;">
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Secondary Color</label>
            <div style="display: flex; gap: 10px; align-items: center;">
              <input type="color" name="secondaryColor" value="<%= owner.emailSettings?.secondaryColor || '#059669' %>" style="width: 60px; height: 44px; border: none; border-radius: 8px; cursor: pointer;">
              <input type="text" class="form-input" value="<%= owner.emailSettings?.secondaryColor || '#059669' %>" readonly style="flex: 1;">
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Confirmation Email Subject</label>
          <input type="text" name="confirmationSubject" class="form-input" value="<%= owner.emailSettings?.confirmationSubject || 'Booking Confirmed' %>" placeholder="Booking Confirmed">
        </div>
        
        <div class="form-group">
          <label class="form-label">Confirmation Message</label>
          <textarea name="confirmationMessage" class="form-input" rows="3" placeholder="Your appointment has been confirmed..."><%= owner.emailSettings?.confirmationMessage || 'Your appointment has been confirmed. Here are the details:' %></textarea>
        </div>
        
        <div class="form-group">
          <label class="form-label">Email Footer (optional)</label>
          <textarea name="emailFooter" class="form-input" rows="2" placeholder="Thank you for choosing us!"><%= owner.emailSettings?.emailFooter || '' %></textarea>
        </div>
        
        <div style="background: #f9fafb; border-radius: 12px; padding: 16px; margin-top: 16px;">
          <p style="color: var(--neo-text-muted); font-size: 13px; margin: 0;">
            <strong>Preview:</strong> These settings will be used for all booking confirmation emails sent to your clients.
          </p>
        </div>
      </div>
      
      <button type="submit" class="btn">Save Settings</button>
    </form>
  </div>
  
  <script>
    // Sync color picker with text input
    document.querySelectorAll('input[type="color"]').forEach(picker => {
      picker.addEventListener('input', (e) => {
        e.target.nextElementSibling.value = e.target.value;
      });
    });
  </script>
</body>
</html>
